
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Writing efficient code &#8212; Aran-Fey&#39;s programming guides</title>
    <link rel="stylesheet" href="../_static/advice.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link media="(prefers-color-theme: light)" rel="stylesheet" type="text/css" href="../_static/pygments-light.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Understanding python’s super function" href="../python/super.html" />
    <link rel="prev" title="Writing maintainable code" href="maintainable-code.html" /> 
  </head><body>

    <div id="sidebar">
        <div id="sidebar-content">
                <a class="homepage-link" title="home page" href="../index.html"><span>Home</span></a>
        </div>
    </div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="writing-efficient-code">
<h1>Writing efficient code<a class="headerlink" href="#writing-efficient-code" title="Permalink to this headline">¶</a></h1>
<ol class="arabic simple">
<li><p>Readability (meaningful variable names, comments, no huge walls of code, …)</p></li>
<li><p>Efficiency (runtime/space complexity)</p></li>
<li><p>Maintainability (proper use of functions/OOP, no global variables, single responsibility principle, …)</p></li>
<li><p>Documentation, testing</p></li>
</ol>
<ol class="arabic simple">
<li><p>nondescript variable/class/function names</p></li>
<li><p>lots of duplicated code</p></li>
<li><p>error handling by returning None/False/an error string</p></li>
<li><p>no separation between game logic and user interface</p></li>
<li><p>useless comments</p></li>
<li><p>hard-coding values</p></li>
<li><p>global variables/instance attributes instead of function parameters</p></li>
<li><p>using the same variable for objects of different kinds</p></li>
<li><p>useless classes (with no state)</p></li>
<li><p>side effects (os.chdir, …)</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>

<span class="c1"># class built only to be inherited by other classes</span>
<span class="k">class</span> <span class="nc">Shared_Attributes</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">health</span> <span class="o">=</span> <span class="mi">100</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">power</span> <span class="o">=</span> <span class="mi">100</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">power_type</span> <span class="o">=</span> <span class="s1">&#39;Mana&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">health_potion</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">power_potion</span> <span class="o">=</span> <span class="mi">3</span>

    <span class="k">def</span> <span class="nf">use_health_potion</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">health_potion</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">health_potion</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">health</span> <span class="o">+=</span> <span class="mi">25</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;Health Potion healed 25 hitpoints, you now have </span><span class="si">{self.health}</span><span class="s1"> hitpoints left.&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;You have no Health Potions left.&#39;</span>

    <span class="k">def</span> <span class="nf">use_power_potion</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_potion</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">power_potion</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">power</span> <span class="o">+=</span> <span class="mi">25</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{self.power_type}</span><span class="s1"> Potion restored 25 {self.power_type.lower()}, you now have </span><span class="si">{self.power}</span><span class="s1"> {self.power_type.lower()} left.&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;You have no </span><span class="si">{self.power_type}</span><span class="s1"> Potions left.&#39;</span>


<span class="k">class</span> <span class="nc">Mage</span><span class="p">(</span><span class="n">Shared_Attributes</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">throw_fireball</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enemy</span><span class="p">):</span>
        <span class="n">dmg</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
        <span class="n">enemy</span><span class="o">.</span><span class="n">health</span> <span class="o">-=</span> <span class="n">dmg</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;You deal </span><span class="si">{dmg}</span><span class="s1"> damage.&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">lesser_heal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">heal</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">health</span> <span class="o">+=</span> <span class="n">heal</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;You gain </span><span class="si">{heal}</span><span class="s1"> health.&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">skill_menu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>


<span class="k">class</span> <span class="nc">Knight</span><span class="p">(</span><span class="n">Shared_Attributes</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">power_type</span> <span class="o">=</span> <span class="s1">&#39;Stamina&#39;</span>

    <span class="k">def</span> <span class="nf">heroic_strike</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dmg</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
        <span class="n">enemy</span><span class="o">.</span><span class="n">health</span> <span class="o">-=</span> <span class="n">dmg</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;You deal </span><span class="si">{dmg}</span><span class="s1"> damage.&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">first_aid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">heal</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">health</span> <span class="o">+=</span> <span class="n">heal</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;You gain </span><span class="si">{heal}</span><span class="s1"> health.&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">check_for_win</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">player_one</span><span class="o">.</span><span class="n">health</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Player Two wins!&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">elif</span> <span class="n">player_two</span><span class="o">.</span><span class="n">health</span> <span class="o">&lt;=</span><span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Player One wins!&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>


<span class="k">def</span> <span class="nf">assign_character</span><span class="p">(</span><span class="n">player_choice</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">player_choice</span> <span class="o">==</span> <span class="s1">&#39;Knight&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Knight</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">player_choice</span> <span class="o">==</span> <span class="s1">&#39;Mage&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Mage</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;Invalid&#39;</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">game_state</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Are you ready to play? (y or n): &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

    <span class="k">while</span> <span class="n">game_state</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Character Choices: Knight, Mage&#39;</span><span class="p">)</span>
        <span class="n">player_one</span> <span class="o">=</span> <span class="n">assign_character</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Player One, choose your character: &#39;</span><span class="p">))</span>
        <span class="n">player_two</span> <span class="o">=</span> <span class="n">assign_character</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Player Two, choose your character: &#39;</span><span class="p">))</span>

        <span class="k">while</span> <span class="ow">not</span> <span class="n">check_for_win</span><span class="p">():</span>
            <span class="n">player_one</span><span class="o">.</span><span class="n">skill_menu</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">check_for_win</span><span class="p">():</span>
                <span class="k">break</span>

            <span class="n">player_two</span><span class="o">.</span><span class="n">skill_menu</span><span class="p">()</span>

        <span class="n">game_state</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Do you want to play again? (y or n): &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</pre></div>
</div>
</div>


          </div>
        </div>
      </div>

      <div class="clearer"></div>
    </div>
        <div id="bottomnav">
                <a class="prev-link" title="Writing maintainable code" href="maintainable-code.html"><span>Writing maintainable code</span></a>
            <a class="homepage-link" title="home page" href="../index.html"><span>Home</span></a>
                <a class="next-link" title="Understanding python’s super function" href="../python/super.html"><span>Understanding python’s <code class="docutils literal notranslate"><span class="pre">super</span></code> function</span></a>
        </div>

    <div class="footer" role="contentinfo">
    </div>
  </body>
</html>