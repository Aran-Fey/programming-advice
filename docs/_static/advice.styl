
lightness_difference(color1, color2)
    l1 = lightness(color1)
    l2 = lightness(color2)
    return abs(l1 - l2)


invert_color_aspect(color, aspect)
    value = aspect(color)
    value = 50% - (value - 50%)
    return aspect(color, value)


invert_font_color(font_color)
    light = lightness(font_color)
    
    if light > 0.5
        light = 0.3
    else
        light = 0.7
    
    return lightness(font_color, light)


highest_lightness_difference(ref_color, color1, color2)
    r1 = lightness_difference(ref_color, color1)
    r2 = lightness_difference(ref_color, color2)
    if r1 > r2
        return color1
    else
        return color2


make_font_color_for_background(bg_color)
    fg_color = font_color_regular
    threshold = lightness_difference(font_color_regular, bg_color_regular)
    
    bg_light = lightness(bg_color)
    fg_light = lightness(fg_color)
    
    if abs(bg_light - fg_light) < threshold
        if bg_light < threshold
            fg_light = bg_light + threshold
        else
            fg_light = bg_light - threshold
    
    return lightness(fg_color, fg_light)


bg_color_regular = #252525
font_color_regular = #ccc
accent_color = #8f438f

increments = 10%

bg_color_dark2 = darken(bg_color_regular, 2*increments)
bg_color_dark = darken(bg_color_regular, increments)
bg_color_light = lighten(bg_color_regular, increments)
bg_color_light2 = lighten(bg_color_regular, 2*increments)
    
font_color_dark = darken(font_color_regular, increments)
font_color_light = lighten(font_color_regular, increments)
font_color_light2 = lighten(font_color_regular, 2*increments)
        
font_color_placeholder = #aaa
        
info_bg = #506977
info_fg = font_color_light
warning_bg = #c8ba70
warning_fg = make_font_color_for_background(warning_bg)
        
border_color = #666

accent_color2 = darken(accent_color, 15%)
accent_font_color = make_font_color_for_background(accent_color)

accent_color_disabled = saturation(accent_color, 10%)
accent_font_color_disabled = darken(accent_font_color, 3*increments)


hover_effect()
    filter: brightness(1.1)


body
    background-color: bg_color_dark2 !important
    background-image: url("data:image/pngbase64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABGCAAAAABURb1YAAAFnklEQVR4AWWXCY4cwXbE6h4JMhCvMPc/ov+3Ox9QsLCGpKlFHILd+UQ559AGDkBSFXWmomonqkL/XuUcIPUcONjHCJyE36KaqNiaRnVCG9TGpgIU9hIfohCBVGj24ammo04lU3Fy0NZDAyZi5AElHjgEGlRbG1WjraIt7TmADQkAaoEHsOXAAaeqat9RVTqjosyEH5W+DQCQt8BzIJMfXJI3e5tGRefSlRn3NrO3scnvNl26FN5RITGNfjm3GM/+FhQgnlQeImC+dEm8rzHVTNGL9EADVsTAIfGJBziRy7RlmcZU1IYpHIj+4JrWym8/XSwzompmFNVOFdTOAAfs61KZ6eXcp57fykQUOxNBmTesz2HpCnCg3UV/bA7VRpWGNqKtrYLTs0ilCjgxiZxjeLC5dDPBFn4Pn2ja6BRUL10DTgET4Focq8rn8casxV4E5tIlZvytqtfivCOKZrqc38G7egnkXecyPZdzubc57VtUnbfL+a0u3b1N3d9Mci7cKocHoh3xihLQ6fXUlgTOOfVkXSUFINoWHhqxE23RTmCqtoEJaITkIrUCkU9fnqpqm+40VSXS3CLaSzfGBb4rPuOSfN0ylLve6/jpcrbL2dTlnOdv5AamKjLvLN1XruMNS/cul/hx8twKpKYRaE2DOp8+c+lW7uVXVQ7Vx0x1G3HXjNocsHCac7NbWc6egwJVHu2kRTVNC2pqv2U4XNsv5/yWJlV9+NJ1C7xluInlcr7rK+Kg+qy7onQqgnbi7UHcS3qXjdw3bO5tumycYlVssMI5EXXpRnatPK362KodtVU60cm+eQT10sVLFwJYlVaf7UGSoi5dQF3DvnTX3UvXTPO8quKH7jsXhm/PxfKWZXqBM5sS33kmKtC31Q05fI095i5IPpyzRXqSy1Sr17p1F7NE8vMtnNbLpVVtk8c0OrfF0sKxHnIpYgHW4puMomTz8mgmrSjpvrxhX97l7LqLpl7bW9BH9/MNzF8XwRqL8/m7c30eFYV5VX3QTquK06XbLt16F4ks+8Z9m6gPtpcuk3OvibCekng4lzMHi9MoqZmKj9tdbQCbc7bcEA+oEJduRNNL1waf1tuI9MDBUK8t3k9uFz3rrqadO9Ln9TL/ezlwDvky3TW7ZmXfpc77TN0yhOXnP939LvVDV9s+tgLTm0TqYd1lea3PRFuVjLa562HdPbCfascGrvO3DMeIATVqVRO8vfHrbupdfo1dzlXUdkVLZsS1mLPG3rWcl+4B1l1537h0VXzU1tyLG7cCu+LSrSqo06hocy3WCcil65qHDbuEYzQN2HpT3jFt9LEFvHTP1nxbXOEkbhkKmd+6BTfVZ/I143z/Fyz6Za92o0I7I6gzfeYAHPwy/Rb43L9TLtMt8CtwW1xvQvbR1g9n7qJRNN1kdxcdH7cM58Szxq679MdLOhE72t6VNEpHHkzwRyjBcGth+dE99pIkVbWaEWmvnQ8Yl7Mp59zpRWXdNo6odrO754Zzvxf/010nP7onb1TR+bgbVPB9PcADJvH/043Kvk0UzLRxQ6UiaeTAcyxYl2lyrrvZv8v2wE7U1uVcST0821jJeIDKWuyxiqnuko7q3+zJYXJ46nV3D67EyL+lQ9F2qkr+3kUafQpwYE8T329p6y7OX1TF97fQv/c+l87zj7Hsgpig4qRLd9fMPs74rLGyCzRbhmVqpy7nqvPmTD1gvKe7b2U8u1QzmtuDuEtbgT3c8QBJveo6cueFkUwv59nVmfFw1jl4/unuOT9qERV76ers8n23z/c8/Xy7a4lwwLplmGusbRp33Up13+ZDN3KPxNVMhY62vUQyRTse6+cKHtZYjIfDh260Cjbb3Vy6R8H8SMBzqSwrsB1UTacoknlnOb8V4JD9Njfpwz/fHjpBUeevcAtcl65sqXPX9D87RUTLc/dfOgAAAABJRU5ErkJggg==") !important
    background-clip: border-box !important
    background-origin: padding-box !important
    background-attachment: scroll !important
    background-repeat: repeat !important
    background-size: auto !important
    background-position: left top !important
    
    color: font_color_regular

a
    color: accent_color
a:hover
a:focus
    color: accent_color
    hover_effect()

details > summary
    background: accent_color
    color: accent_font_color
    padding: 0 0.2em

button
    background: accent_color

    &:hover 
        hover_effect()

input[type="text"]
textarea
.ace-github
select
    background: bg_color_dark !important
    border: 1px solid accent_color !important
    color: font_color_dark !important

input[type="text"]:focus
textarea:focus 
select:focus
    box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(196, 196, 196, 0.4)

::-webkit-input-placeholder
:-moz-placeholder
::-moz-placeholder
:-ms-input-placeholder
    color: font_color_placeholder

.ace-github
    .ace_gutter 
        background: bg_color_light
        color: font_color_dark
    
    .ace_marker-layer .ace_active-line 
        background: bg_color_light
    
    .ace_print-margin 
        background: bg_color_light
    
    .ace_cursor 
        color: accent_color


blockquote 
    border-left: 5px solid bg_color_light2


code
pre 
    background: bg_color_dark2
    color: font_color_regular

pre 
    border: 1px solid border_color

// === END OF GENERIC DARK STYLE ===

// === LAYOUT ===

.body
    max-width: 50em
    margin: auto
    
// === STYLE ===

h1
h2
h3
h4
h5
    a.headerlink
        text-decoration: none

    &:not(:hover)
        a.headerlink
            display: none
